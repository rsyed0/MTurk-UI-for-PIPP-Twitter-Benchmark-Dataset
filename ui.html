<!DOCTYPE html>
<html>
<head>
    
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://assets.crowd.aws/crowd-html-elements.js" > </script>
<script type="text/javascript">

let originalText = "";
let highlighted_words = new Set();
let question_number = 1;
let userSelection = "";
let trigger_word = "";
let trigger_range = "";
let word_num = "";
let triggerword_token_qsn = "";
let events_words = {
    "infect" : [],
    "spread" : [],
    "symptom" : [],
    "prevent" : [],
    "control" : [],
    "cure" : [],
    "death" : [],
    "flag": []
};
let field_names = ['${text1}', '${text2}', '${text3}', '${text4}', '${text5}'];
let ids = ['${id1}', '${id2}', '${id3}', '${id4}', '${id5}'];
let event_names = ['${name1}', '${name2}', '${name3}', '${name4}', '${name5}'];
let annotations_list = ['[{"event": "symptom","trigger":"69-73","person":"","symptom":"64-67","disease":"","place":"","time":"","duration":"","information":""}, {"event": "symptom","trigger":"69-76","person":"","symptom":"64-67","disease":"","place":"","time":"","duration":"","information":""}]', '[{"event": "symptom", "trigger":"69-73","person":"","symptom":"64-67","disease":"","place":"","time":"","duration":"","information":""}]', '[{"event": "symptom", "trigger":"69-73","person":"","symptom":"64-65","disease":"","place":"","time":"","duration":"","information":""}]', '[{"event": "symptom", "trigger":"69-73","person":"","symptom":"64-67","disease":"","place":"","time":"","duration":"","information":""}]', '[{"event": "symptom", "trigger":"69-73","person":"","symptom":"54-67","disease":"","place":"","time":"11","duration":"","information":""}]'];
// let annotations_list = ['${annotations1}', '${annotations2}', '${annotations3}', '${annotations4}', '${annotations5}']; // TODO: switch this back out when pasting onto live site
let current_table = "small";
let output_obj = {};
 

window.onload = function() {

  
  for (let i = 1; i <= field_names.length; i++) {
        let ele = document.createElement("H2");
        ele.textContent = field_names[i-1];
        ele.setAttribute('id', 'question'+String(i));
        document.querySelector("#questions").appendChild(ele);

        let ele2 = document.createElement("H3");
        ele2.textContent = "Event: " + event_names[i-1];
        ele2.setAttribute('id', 'event'+String(i));
        document.querySelector("#events").appendChild(ele2);
        
        const annotations = JSON.parse(annotations_list[i-1]);

        const annotation_div = document.createElement('div');
        annotation_div.setAttribute('id', `annotation_div` + i);

        // Populate the div with p elements
        for (let j = 0; j < annotations.length; j++) {
            annotation_div.innerHTML += parseAnnotationJSONToHtml(annotations[j], i + "_" + j);

            output_obj[i + "_" + j] = {
                text: field_names[i-1],
                annotation: annotations[j],
                correct: true,
                explanation: null,
            };
        }
        document.querySelector("#annotations").appendChild(annotation_div);

        // attach onchange event listener to the parent because the children are dynamically updated
        parent_annotation_div = document.getElementById("text_annotations");
        parent_annotation_div.addEventListener("input", function (event) {
        // TODO: add the dynamic shit with the checkbox here
        if (event.target.type == "checkbox") {
            output_obj[event.target.name]["correct"] = !event.target.checked;
        }

        // Check if the target of the event is a textarea
        if (event.target.tagName.toLowerCase() === "textarea") {
          // Get the trimmed text content of the textarea
          var text = event.target.value.trim();

            // update output object
            output_obj[event.target.name]["explanation"] = text
        }
      });
        
  }
  
  document.getElementById("text_question").innerHTML = document.getElementById("question"+String(question_number)).innerHTML;
  document.getElementById("text_event").innerHTML = document.getElementById("event"+String(question_number)).innerHTML;
  document.getElementById("text_annotations").innerHTML = document.getElementById("annotation_div"+String(question_number)).innerHTML;
  originalText = document.getElementById("text_question").innerHTML;

  replace();
  document.getElementById("previous_btn").disabled = true;
  document.getElementById("qsn_num").innerHTML = question_number + '/' + field_names.length;
  document.getElementById("submit_hit").disabled = (String(field_names.length) != String(question_number));
  
  document.getElementById("infect_trigger_words").value = "default,";
  document.getElementById("spread_trigger_words").value = "default,";
  document.getElementById("symptom_trigger_words").value = "default,";
  document.getElementById("prevent_trigger_words").value = "default,";
  document.getElementById("control_trigger_words").value = "default,";
  document.getElementById("cure_trigger_words").value = "default,";
  document.getElementById("death_trigger_words").value = "default,";
  document.getElementById("flag_trigger_words").value = "default,";
}

// Function to convert an annotated event in JSON to HTML
function parseAnnotationJSONToHtml(jsonData, id) {
  var html = `<div id='`+id+`' style='border:1px solid black; width: 400px ;padding: 10px; margin: 10px; display: flex; justify-content: space-between;'>`;

    
    html += "<div class='annotation_arguments' style='margin-right: 10px; width: 50%;'>"
        
    for (var key in jsonData) {
        if (jsonData.hasOwnProperty(key)) {
            // Create a <p> element for each key-value pair
                html += "<p style='margin: 0px'>" + key + ": " + "<span style='color:#1ec211'>" + jsonData[key] + "</span></p>";
        }
    }
            
    html += "</div>";
    html += `<div class='verfication_corrections' style='margin-left: 10px;'><div style='margin-bottom: 10px;'> <label for="checkbox_`+id+`"> Incorrect? </label><input type="checkbox" id="checkbox_`+id+`" name="`+id+`" value="" onclick="addIncorrect('`+id+`')" > </input>  </div>`;
    html += `<div id="expl_`+id+`"><label for="expl_`+id+`_text"> What's wrong: </label><textarea id="expl_`+id+`_text" name="`+id+`" placeholder="Explanation" style='width: 95%;'> </textarea> </div></div>`;

    html += "</div>"; // Close the container element
    return html;
}

function isAlphanumeric(str) {
  return str.match(/^[a-zA-Z0-9]+$/) !== null;
}

let lang = "jp";
function replace()
{
    let currEventName = event_names[question_number-1];

    let currText = field_names[question_number-1];
    let v=[];
    let i=0;
    let curr_word = "";

    if (lang === "jp") {
        while(i<currText.length)
        {
            if(currText[i] != ' ')
                v.push(currText[i]);
            i++;
        }

    } else {
        while(i<=currText.length)
        {
            if(i==currText.length)
            {
                if(curr_word.length > 0)
                    v.push(curr_word);
                break;
            }
            if(isAlphanumeric(String(currText[i])))
            {
                if(curr_word.length > 0 && !isAlphanumeric(curr_word))
                {
                    v.push(curr_word);
                    curr_word = "";
                }
                curr_word = curr_word + currText[i];
            }
            else if(currText[i] == ' ')
            {
                if(curr_word.length > 0)
                {   
                     v.push(curr_word);
                }
                    curr_word = "";
            }
            else {
                if(curr_word.length > 0 && isAlphanumeric(curr_word))
                {   
                     v.push(curr_word);
                     curr_word = "";
                }
                curr_word = curr_word + currText[i];
            }
            i++;
        }
    }
    
    let result = "";
    i=0;
    let count = 0;
    let w = v;

    while(i<w.length)
    {
        if(w[i].length>0)
        {
            // if(/\S/.test(w[i]))
            // {
            superscript = "_" + String(count);
            if(highlighted_words.has(w[i]+'_'+String(count)+'_'+String(question_number))) 
            {  
                console.log(w[i]);
                result = result + '<span style="background-color:#7FFF00">' + w[i] + '</span> ';
            }
            else
            {    
                result = result + w[i] + superscript.sup() + ' ';
            }
            
            count++;
            
            // }
            // else
            // {
            //     result = result + w[i];
            // }
        }
        i++;
    }

    document.getElementById("text_question").innerHTML = result;
    document.getElementById("text_event").innerHTML = "Event: " + currEventName;

}

function previous()
{
    hideMenu();
    question_number = question_number - 1;
    document.getElementById("text_question").innerHTML = document.getElementById("question"+String(question_number)).innerHTML;
    document.getElementById("text_event").innerHTML = document.getElementById("event"+String(question_number)).innerHTML;
    replace();
    populateSelectedItems();
    document.getElementById("submit_hit").disabled = (String(field_names.length) != String(question_number));
    if(String(1) == String(question_number))
    {  
        document.getElementById("previous_btn").disabled = true;
    }
    if(String(field_names.length) != String(question_number))
    {
        document.getElementById("next_btn").disabled = false;
    }
    document.getElementById("qsn_num").innerHTML = question_number + '/' + field_names.length;
}

function next()
{
    hideMenu();
    question_number = question_number + 1;
    document.getElementById("text_question").innerHTML = document.getElementById("question"+String(question_number)).innerHTML;
    document.getElementById("text_event").innerHTML = document.getElementById("event"+String(question_number)).innerHTML;
    document.getElementById("text_annotations").innerHTML = document.getElementById("annotation_div"+String(question_number)).innerHTML;

    console.log(output_obj);

    /*
    - maintain a JSON object of sorts to track annotations + comments
    - TODO: make the textareas of checked boxes mandatory
    - scrape all the textareas for their values
    - Throw it into JSON object

    JSON object format:
    [
        {
            text: "I have covid omg"
            annotation: "lorem ipsum",
            correct: false
            explanation: "Lorem ipsum"
        },
        {
            text: "I have covid omg"
            annotation: "lorem ipsum",
            correct: false
            explanation: "Lorem ipsum"
        },
    ]
    
    and then we can just serialize this as a string
    */

    replace();
    populateSelectedItems();
    document.getElementById("submit_hit").disabled = (String(field_names.length) != String(question_number));
    if(String(field_names.length) == String(question_number))
    {  
        document.getElementById("next_btn").disabled = true;
    }
    if(String(1) != String(question_number))
    {
        document.getElementById("previous_btn").disabled = false;
    }
    document.getElementById("qsn_num").innerHTML = question_number + '/' + field_names.length;
}

function hideMenu() {
        document.getElementById("contextMenu").style.display = "none"
}

function list_to_string(li)
{
    var s = "default,";
    for(let elem in li)
    {
        s += li[elem] + ",";
    }
    return s.substring(0, s.length-1);
}

  
function select(e) {
    
    // e.preventDefault();
    userSelection = window.getSelection();
    console.log(userSelection);
    if (userSelection === null) return;
    startNode = userSelection.anchorNode;
    endNode = userSelection.focusNode;
    questionNode = document.getElementById("text_question");
    if (startNode.parentNode !== questionNode && startNode.parentNode.parentNode !== questionNode || 
        endNode.parentNode !== questionNode && endNode.parentNode.parentNode !== questionNode) {
        return;
    }
    if (startNode.parentNode !== questionNode) startNode = startNode.parentNode;
    if (endNode.parentNode !== questionNode) endNode = endNode.parentNode;
    startNodeIndex = 0; endNodeIndex = 0;
    for (var i = 0; i < questionNode.childNodes.length; i++) {
        if (questionNode.childNodes[i] === startNode) {
            startNodeIndex = i;
        }
        if (questionNode.childNodes[i] === endNode) {
            endNodeIndex = i;
        }
    }
    if (startNodeIndex > endNodeIndex) {
        var temp = startNodeIndex;
        startNodeIndex = endNodeIndex;
        endNodeIndex = temp;
    }
    selected = "";
    for (var i = startNodeIndex; i <= endNodeIndex; i++) {
        if (questionNode.childNodes[i].nodeName === "SUP") {
            continue;
        }
        selected += questionNode.childNodes[i].textContent;
    }
    selected = selected.trim();
    if (selected === "") {
        return;
    }
    trigger_word = selected;
    trigger_range = '('+startNodeIndex/2+'-'+endNodeIndex/2+')';
    triggerword_token_qsn = selected + '_' + startNodeIndex/2 + '-' + endNodeIndex/2 + '_' + ids[question_number-1];
           
    document.getElementById("infect").checked = false;
    document.getElementById("spread").checked = false;
    document.getElementById("symptom").checked = false;
    document.getElementById("prevent").checked = false;
    document.getElementById("control").checked = false;
    document.getElementById("cure").checked = false;
    document.getElementById("death").checked = false;
    document.getElementById("flagg").checked = false;

    // make all divs invisible
    const eventTypes = ["infect", "spread", "symptom", "prevent", "control", "cure", "death"];

    for (let i=0;i<7;i++) {
        document.getElementById("argument-" + eventTypes[i] + "-div").style.display = "none";
    }
     
    document.getElementById("trigger_word_content").innerHTML = 'select the events that are triggered by "' + trigger_word + '" '+trigger_range;
 
    var menu = document.getElementById("contextMenu")
    menu.style.display = 'block';

}

var t = ''
function dragText(e) {
    t = (document.all) ? document.selection.createRange().text : document.getSelection();

    document.getElementById('input').value = t;
    
    userSelection = window.getSelection().getRangeAt(0);
    console.log(String(userSelection));
    let _index = String(userSelection).lastIndexOf("_");
    if(_index>0)
    {
        trigger_word = String(userSelection).substring(0, _index);
        
        if(!isAlphanumeric(trigger_word))
        {
            alert("you did not click on a valid word");
            return;
        }
        
        word_num = String(userSelection).substring(_index+1);
        triggerword_token_qsn = String(userSelection) + '_' + ids[question_number-1]; //String(question_number);
        console.log(triggerword_token_qsn);
    }
    else
    {
        alert("you did not click on a valid word");
        return;
    }
           
    document.getElementById("infect").checked = false;
    document.getElementById("spread").checked = false;
    document.getElementById("symptom").checked = false;
    document.getElementById("prevent").checked = false;
    document.getElementById("control").checked = false;
    document.getElementById("cure").checked = false;
    document.getElementById("death").checked = false;
    document.getElementById("flagg").checked = false;
     
    document.getElementById("trigger_word_content").innerHTML = 'select the events that are triggered by "' + trigger_word + '"';
 
    var menu = document.getElementById("contextMenu")
    menu.style.display = 'block';
}

function delete_tw(id)
{
    
    let _index = id.indexOf('_');
    //let __index = id.indexOf('_', _index+1);
    let extracted_tiggerword_token_qsn = id.substring(_index+1);
    let elem = document.getElementById("p_" + extracted_tiggerword_token_qsn);

    // console.log("elem: ", elem);
    
    elem.remove();
    // console.log("elem after remove: ", document.getElementById("p_" + extracted_tiggerword_token_qsn));
    
    console.log("removing " + extracted_tiggerword_token_qsn);
    
    highlighted_words.delete(extracted_tiggerword_token_qsn);
    replace();
    
    let index = events_words["infect"].indexOf(extracted_tiggerword_token_qsn);
    if (index > -1) 
    {    
        events_words["infect"].splice(index, 1); 
        s = list_to_string(events_words['infect']);
        document.getElementById("infect_trigger_words").value = s;
    }
    index = events_words["spread"].indexOf(extracted_tiggerword_token_qsn);
    if (index > -1) 
    {    
        events_words["spread"].splice(index, 1); 
        s = list_to_string(events_words['spread']);
        document.getElementById("spread_trigger_words").value = s;
    }
    index = events_words["symptom"].indexOf(extracted_tiggerword_token_qsn);
    // for (var i = 0; i < events_words["symptom"].length; i++) {
    //     console.log(i + ": " + events_words["symptom"][i]);
    //     console.log(events_words["symptom"][i].length);
    //     console.log(extracted_tiggerword_token_qsn.length);
    //     console.log(events_words["symptom"][i] == extracted_tiggerword_token_qsn);
    // }
    // console.log(events_words["symptom"].indexOf(extracted_tiggerword_token_qsn));
    if (index > -1) 
    {    
        console.log("removing from symptom");
        events_words["symptom"].splice(index, 1); 
        s = list_to_string(events_words['symptom']);
        document.getElementById("symptom_trigger_words").value = s;
    }
    index = events_words["prevent"].indexOf(extracted_tiggerword_token_qsn);
    if (index > -1) 
    {    
        events_words["prevent"].splice(index, 1); 
        s = list_to_string(events_words['prevent']);
        document.getElementById("prevent_trigger_words").value = s;
    }
    index = events_words["control"].indexOf(extracted_tiggerword_token_qsn);
    if (index > -1) 
    {    
        events_words["control"].splice(index, 1); 
        s = list_to_string(events_words['control']);
        document.getElementById("control_trigger_words").value = s;
    }
    index = events_words["cure"].indexOf(extracted_tiggerword_token_qsn);
    if (index > -1) 
    {    
        events_words["cure"].splice(index, 1); 
        s = list_to_string(events_words['cure']);
        document.getElementById("cure_trigger_words").value = s;
    }
    index = events_words["death"].indexOf(extracted_tiggerword_token_qsn);
    if (index > -1) 
    {    
        events_words["death"].splice(index, 1); 
        s = list_to_string(events_words['death']);
        document.getElementById("death_trigger_words").value = s;
    }
    index = events_words["flag"].indexOf(extracted_tiggerword_token_qsn);
    if (index > -1) 
    {    
        events_words["flag"].splice(index, 1); 
        s = list_to_string(events_words['flag']);
        document.getElementById("flag_trigger_words").value = s;
    }

    // console.log("after deleting: " + events_words["symptom"]);
    
    hideMenu();
}

function edit_events(id)
{

    let _index = id.indexOf('_');
    //let __index = id.indexOf('_', _index+1);
    let extracted_tiggerword_token_qsn = id.substring(_index+1);
    let info = split_ttq(extracted_tiggerword_token_qsn);

    trigger_word = info["words"];
    trigger_range = "(" + info["range"] + ")";

    //trigger_word = getInfo(extracted_tiggerword_token_qsn, 'w');
    console.log(trigger_word);
    document.getElementById("trigger_word_content").innerHTML = 'Editing the events that are triggered by "' + trigger_word + ' ' + trigger_range + '"';
 
    var menu = document.getElementById("contextMenu")
    menu.style.display = 'block';

    const eventTypes = ["infect", "spread", "symptom", "prevent", "control", "cure", "death"];

    // console.log(events_words["infect"]);
    // console.log(extracted_tiggerword_token_qsn);

    for (let i=0;i<7;i++) {
        document.getElementById("argument-" + eventTypes[i] + "-div").style.display = "none";
    }

    for (let i=0;i<7;i++) {
        let contains_ettq = false;
        for (let j=0;j<events_words[eventTypes[i]].length;j++) {
            let event_desc = events_words[eventTypes[i]][j];
            if (event_desc.includes(extracted_tiggerword_token_qsn)) {
                contains_ettq = true;

                console.log(event_desc);
                let _i = event_desc.indexOf("_");
                let __i = event_desc.indexOf("_", _i+1);

                let event_tw = event_desc.substring(0,_i);
                let event_arg = event_desc.substring(_i+1, __i);
                let dropdown = document.getElementById("argument-" + eventTypes[i]);

                console.log("argument-" + eventTypes[i] + "-" + event_arg);

                document.getElementById("argument-" + eventTypes[i] + "-div").style.display = "inline";
                populateTriggerWordDropdown(eventTypes[i]);
                var selected_option = document.getElementById("argument-" + eventTypes[i] + "-" + event_arg);
                if (selected_option === null) {
                    // other option was selected
                    // TODO: find a way to differentiate other w/ some option in input vs that option
                    document.getElementById("argument-" + eventTypes[i] + "-other").selected = true;
                    document.getElementById("argument-" + eventTypes[i] + "-input").value = event_arg;
                } else {
                    selected_option.selected = true;
                }

                break;
            }
        }
        document.getElementById(eventTypes[i]).checked = contains_ettq;

    }

    //contains_ettq = false;
    let index = events_words["flag"].indexOf(extracted_tiggerword_token_qsn);
    /*for (let i=0;i<7;i++) {
        for (let j=0;j<events_words[eventTypes[i]].length;j++) {
            let event_desc = events_words[eventTypes[i]][j];
            if (event_desc.includes(extracted_tiggerword_token_qsn)) {
                contains_ettq = true;

                let event_arg = event_desc.substring(0,event_desc.indexOf("_"));
                document.getElementById("argument-flag-input").value = event_arg;

                break;
            }
        }
    }*/
    document.getElementById("flagg").checked = (index > -1); //contains_ettq;
    document.getElementById("argument-flag-div").style.display = (index > -1) ? "inline" : "none";


    // TODO load argument(s) from events arrays

    triggerword_token_qsn = extracted_tiggerword_token_qsn;
    
}


function highlightRange() {

    highlighted_words.add(triggerword_token_qsn);
    replace();

}

function getTriggerWords(eventType) {
    // get each argument that has type "trigger"
    const events = events_words[eventType];
    var output = [];
    events.forEach((event) => {
        const tokens = event.split("_");
        if (tokens[1] == "trigger" && tokens[tokens.length-1] == ids[question_number-1]){
            output.push(tokens[2] + " (" + tokens[3] + ")");
        }
    });
    return output;
}

function populateTriggerWordDropdown(eventType) {
    const options = getTriggerWords(eventType);
    console.log(eventType+" "+options);

    const select = document.getElementById("argument-" + eventType + "-tw");

    var i, L = select.options.length - 1;
    for(i = L; i >= 0; i--) {
        select.remove(i);
    }

    options.forEach((opt) => {
        var option = document.createElement('option');
        option.text = option.value = opt;
        select.add(option, 0);
    });
}

function updateDropdowns(sender) {
    console.log("reg " + sender);

    const eventTypes = ["infect", "spread", "symptom", "prevent", "control", "cure", "death"];

    for (let i=0;i<7;i++) {
        if (i == sender) {
            document.getElementById("argument-" + eventTypes[i] + "-div").style.display = document.getElementById(eventTypes[i]).checked ? "none" : "inline";
        } else {
            document.getElementById("argument-" + eventTypes[i] + "-div").style.display = document.getElementById(eventTypes[i]).checked ? "inline" : "none";
        }

        populateTriggerWordDropdown(eventTypes[i]);

        /*if (document.getElementById("argument-" + eventTypes[i]).value == "trigger") {
            document.getElementById("argument-" + eventTypes[i] + "-tw").disabled = true;
        } else {
            document.getElementById("argument-" + eventTypes[i] + "-tw").disabled = false;
        }*/
    }

    if (sender == 7) {
        document.getElementById("argument-flag-div").style.display = document.getElementById("flagg").checked ? "none" : "inline";
    } else {
        document.getElementById("argument-flag-div").style.display = document.getElementById("flagg").checked ? "inline" : "none";
    }

}

function updateOtherDropdowns(i) {

    console.log("other " + i);

    const eventTypes = ["infect", "spread", "symptom", "prevent", "control", "cure", "death"];

    document.getElementById("argument-" + eventTypes[i] + "-input").style.display = (document.getElementById("argument-" + eventTypes[i]).value == "other") ? "inline" : "none";

}


function events_selected()
{
    
    events = "";
    let index = 0;

    let other_selected = document.getElementById("infect").checked || document.getElementById("spread").checked || document.getElementById("symptom").checked || document.getElementById("prevent").checked || document.getElementById("control").checked || document.getElementById("cure").checked || document.getElementById("death").checked;

    let flag_selected = document.getElementById("flagg").checked;

    if (flag_selected && !other_selected) {
        alert("Must select a non-flag event also");
        return;
    }

    var idx = triggerword_token_qsn.indexOf("_");
    console.log("Test: " + triggerword_token_qsn);

    const eventTypes = ["infect", "spread", "symptom", "prevent", "control", "cure", "death"];

    for (let i=0;i<7;i++) {
        let eventType = eventTypes[i];
        var checkBox = document.getElementById(eventType);

        if (checkBox.checked == false) {
            continue;
        }

        var dropDown = document.getElementById("argument-" + eventType);
        var twDropDown = document.getElementById("argument-" + eventType + "-tw");

        var selectedArg = dropDown.value;
        var selectedTw = twDropDown.value;

        if (selectedArg === "other") {
            selectedArg = document.getElementById("argument-"+ eventType +"-input").value;
        }

        if (selectedArg === "trigger") {
            selectedTw = "";
        } else if (selectedTw == "") {
            alert("Must select a trigger first");
            return;
        }

        // console.log("selected arg 1: " + selectedArg);
        
        // add argument to triggerword token qsn
        var triggerword_arg_token_qsn = selectedTw + "_" + selectedArg + "_" + triggerword_token_qsn; 
        //triggerword_token_qsn.substring(0,idx) + "_" + selectedArg + triggerword_token_qsn.substring(idx);
    
        // console.log("trigger word arg token 1: " + triggerword_arg_token_qsn);

        index = events_words[eventType].indexOf(triggerword_arg_token_qsn);
        if (checkBox.checked == true){
            if(events != "")
                events+=", ";
            events += eventType + " (" + selectedArg + ")";
            if(index==-1)
            {
                // creating event
                events_words[eventType].push(triggerword_arg_token_qsn);
                // console.log("updated events words: " + events_words["symptom"]);

                s = list_to_string(events_words[eventType]);
                document.getElementById(eventType + "_trigger_words").value = s;
            }
        }
        else if (index > -1) 
        {
            // removing event
            events_words[eventType].splice(index, 1);
            s = list_to_string(events_words[eventType]);
            document.getElementById(eventType + "_trigger_words").value = s;
        }

    }

    var checkBox = document.getElementById("flagg");
    var selectedArgFlag = document.getElementById("argument-flag-input").value;

    if (selectedArgFlag === "" && checkBox.checked) {
        alert("Must submit a reason for flagging");
        return;
    }

    // console.log("selected arg: " + selectedArgFlag);

    // add argument to triggerword token qsn
    var triggerword_arg_token_qsn_flag = selectedTw + "_" + selectedArgFlag + "_" + triggerword_token_qsn; 
    //triggerword_token_qsn.substring(0,idx) + "_" + selectedArg + triggerword_token_qsn.substring(idx);

    // console.log("trigger word arg token: " + triggerword_arg_token_qsn_flag);

    index = events_words["flag"].indexOf(triggerword_arg_token_qsn_flag);
    if (checkBox.checked == true){
        if(events != "")
            events+=", ";
        events += "flag (" + selectedArgFlag + ")";
        if(index==-1)
        {
            // creating event
            events_words["flag"].push(triggerword_arg_token_qsn_flag);
            s = list_to_string(events_words["flag"]);
            document.getElementById("flag_trigger_words").value = s;
        }
    }
    else if (index > -1) 
    {
        // removing event
        events_words["flag"].splice(index, 1);
        s = list_to_string(events_words["flag"]);
        document.getElementById("flag_trigger_words").value = s;
    }
    /*index = events_words["flag"].indexOf(triggerword_token_qsn);
    if (flag_checkBox.checked == true){
        if(events != "")
            events+=", ";
        events += "flag";
        if(index==-1)
        {
            events_words["flag"].push(triggerword_token_qsn);
            s = list_to_string(events_words['flag']);
            document.getElementById("flag_trigger_words").value = s;
        }
    }
    else if (index > -1) 
        {    
            events_words["flag"].splice(index, 1); 
            s = list_to_string(events_words['flag']);
            document.getElementById("flag_trigger_words").value = s;
        }*/
  
  hideMenu();
  elem = document.getElementById("p_" + triggerword_arg_token_qsn);
  if(events === "")
  {
      elem.remove();
      highlighted_words.delete(triggerword_arg_token_qsn);
      replace();
      return;
  }
  
  highlightRange();

    if(elem)
    {
        elem.innerHTML =  ' <span id="selection_' + triggerword_arg_token_qsn + '">' + "Trigger_Word : " + '<span style="color:#1ec211">' + trigger_word + " " + trigger_range + '</span>' + '</span> <br> <span> Events: ' + '<span style="color:#1ec211">' + events + '</span>' + '</span> <br> <button class="btn" type="button" onclick="delete_tw(this.id)" id="delete_' + triggerword_arg_token_qsn + '"> <i class="fa fa-trash"> </i> Delete </button> <button class="btn" type="button" onclick="edit_events(this.id)" id="edit_' + triggerword_arg_token_qsn + '"> <i class="fa fa-edit"> </i> Edit </button>';
    }
    else
    {
        document.getElementById("trigger_words").innerHTML +=
        ' <p style="border:1px solid black; width: 300px ;padding: 10px; margin: 10px;" id="p_'+ triggerword_arg_token_qsn + '"> <span id="selection_' + triggerword_arg_token_qsn + '">' + "Trigger_Word : " + '<span style="color:#1ec211">' + trigger_word + " " + trigger_range + '</span>' + '</span> <br> <span> Events: ' + '<span style="color:#1ec211">' + events + '</span>' + '</span> <br> <button class="btn" type="button" onclick="delete_tw(this.id)" id="delete_' + triggerword_arg_token_qsn + '"> <i class="fa fa-trash"> </i> Delete </button> <button class="btn" type="button" onclick="edit_events(this.id)" id="edit_' + triggerword_arg_token_qsn + '"> <i class="fa fa-edit"> </i> Edit </button> </p>';
    } 
  

    
}

function handle_submit() {
    console.log(JSON.stringify(output_obj));

    document.getElementById("master_object").value = JSON.stringify(output_obj);

    console.log(document.getElementById("master_object"));
}

function split_ttq(ttq)
{
    let tkns = ttq.split("_");
    let words = tkns[0];
    let index_tkns = tkns[1].split("-");
    let start_index = parseFloat(index_tkns[0]);
    let end_index = parseFloat(index_tkns[1]);
    let tweet_id = tkns[2];

    let output = {};
    output["words"] = words;
    output["start"] = start_index;
    output["end"] = end_index;
    output["range"] = tkns[1];
    output["tweet"] = tweet_id;

    return output;
}

function getInfo(word_token_num, ch)
{
    let _index = word_token_num.lastIndexOf("_");
    let qid = word_token_num.substring(_index+1);
    let _left = word_token_num.substring(0, _index);
    let __index = _left.lastIndexOf("_");
    let token = _left.substring(__index+1);
    let word = _left.substring(0, __index);

    console.log(word_token_num);
    console.log(word);
    
    if(ch == 'w')
    {
        return word;
    }
    else if(ch == 't')
    {
        return token;
    }
    else if(ch == 'q')
    {
        return ids.indexOf(qid)+1;
    }
    else if(ch == 'i')
    {
        return qid;
    }
}

function populateSelectedItems()
{
    console.log(highlighted_words);
    document.getElementById("trigger_words").innerHTML = "";
    for(let item of highlighted_words.values())
    {
        let qsn = getInfo(item, 'q');
        if(String(qsn) == String(question_number))
        {
            
            let output = split_ttq(item);
            let word = output["words"];
            let range = output["range"];
            let events = "";

            const eventTypes = ["infect", "spread", "symptom", "prevent", "control", "cure", "death"];
            for (let i=0;i<7;i++) {
                let eventType = eventTypes[i];

                for (let j=0;j<events_words[eventType].length;j++) {

                    let event_desc = events_words[eventType][j];
                    if (event_desc.includes(item)) {
                        let _index = event_desc.indexOf("_");
                        let __index = event_desc.indexOf("_", _index+1);
                        let argType = event_desc.substring(_index+1, __index);

                        events += eventType + " (" + argType + "), ";
                    }
                }
            }

            if (events.length > 0) {
                events = events.substring(0, events.length-2);
            }

            index = events_words["flag"].indexOf(item);
            if(index > -1)
            {
                if(events != "")
                    events+=", ";
                events += "flag";
            }     

            document.getElementById("trigger_words").innerHTML +=
        ' <p style="border:1px solid black; width: 300px ;padding: 10px; margin: 10px;" id="p_'+ item + '"> <span id="selection_' + item + '">' + "Trigger_Word : " + '<span style="color:#1ec211">' + word + ' (' + range + ') </span>' + '</span> <br> <span> Events: ' + '<span style="color:#1ec211">' + events + '</span>' + '</span> <br> <button class="btn" type="button" onclick="delete_tw(this.id)" id="delete_' + item + '"> <i class="fa fa-trash"> </i> Delete </button> <button class="btn" type="button" onclick="edit_events(this.id)" id="edit_' + item + '"> <i class="fa fa-edit"> </i> Edit </button> </p>';
 
        }
        
    }
}

const tables = ["small", "arg", "big"];
const tt_to_ids = {"small": 0, "arg": 1, "big": 2};
const table_descs = ["<u> Click here to view a simpler table</u>", "<u> Click here to view the arguments table</u>", "<u> Click here to view an exhaustive table</u>"];


function toggle_table(direction)
{
    function mod(n, m) {
      return ((n % m) + m) % m;
    }

    let current_id = tt_to_ids[current_table];
    let new_id = mod((current_id + direction), 3);
    let back_id = mod((new_id - 1), 3);
    let fwd_id = mod((new_id + 1), 3);

    for (let i=0;i<3;i++) {
        document.getElementById(tables[i] + "_table").style.display = "none";
    }

    document.getElementById(tables[new_id] + "_table").style.display = "block";
    document.getElementById("table_toggler").innerHTML = table_descs[fwd_id];
    document.getElementById("table_toggler2").innerHTML = table_descs[back_id];
    current_table = tables[new_id];
    
}

</script>
<style>

  sup {
  vertical-align: super;
  font-size: 5.0pt;
}
  #infect_event {display: inline-block;}
  #spread_event {display: inline-block;}
  #symptom_event {display: inline-block;}
  #prevent_event {display: inline-block;}
  #control_event {display: inline-block;}
  #treatment_event {display: inline-block;}
  #cure_event {display: inline-block;}
  #death_event {display: inline-block;}
  #flag_event {display: inline-block;}
  /*#annotate {float: left; width=50%}*/
  /*#sample_table { float: right; width=50%}*/
  
         .highlight_word
        {
            background-color: #00FF00;
        }
        
        .un-highlight_word
        {
            background-color: #ffffdd;
        }
  
  table {float:right;
      font-size: 100%;
      height: 30%;
      /*width: 90%;*/
  }
  table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
  
  
  
          .context-menu {
            position: absolute;
            text-align: center;
            background: lightgray;
            border: 1px solid black;
        }
  
        .context-menu ul {
            padding: 0px;
            margin: 0px;
            min-width: 150px;
            list-style: none;
        }
  
        .context-menu ul li {
            padding-bottom: 7px;
            padding-top: 7px;
            border: 1px solid black;
        }
  
        .context-menu ul li a {
            text-decoration: none;
            color: black;
        }
  
        .context-menu ul li:hover {
            background: darkgray;
        }
}


</style>
</head>

<!-- For the full list of available Crowd HTML Elements and their input/output documentation,
      please refer to https://docs.aws.amazon.com/sagemaker/latest/dg/sms-ui-template-reference.html -->

<!-- You must include crowd-form so that your task submits answers to MTurk -->
<body>
<crowd-form answer-format="flatten-objects">
 <div class="pager" style="margin-left:30%;">
 <button type="button" style="color:#FFFFFF;background-color:#4CAF50;" id="previous_btn" onclick="previous()">&laquo; Previous</button>
 <span id="qsn_num"> </span>
 <button type="button" style="color:#FFFFFF;background-color:#4CAF50;" id="next_btn" onclick="next()">Next &raquo;</button>
 <span style="color:#3ca2c3;margin-left:45%;" id="table_toggler" onclick="toggle_table(1)"> <u> Click here to view an exhaustive table</u> </span>
 <span style="color:#3ca2c3;margin-left:45%;" id="table_toggler2" onclick="toggle_table(-1)"> <u> Click here to view arguments table</u> </span>
 </div>
 
  <crowd-instructions link-text="View instructions" link-type="button">
    <short-summary>
      <p>An Event is defined as something happens in a sentence. In this task, we are trying to identity whether one or more of the following events exist in a given string: <i>infect, spread,symptom,prevent,control, cure, and death</i>. And if an event exist, what is the major <b>triggering word</b> that mostly manifest its occurrence.
        <br><br>
      If there exists explicit negation of an event, we say that the event does NOT exists and do NOT mark it as a triggering word.
        <br><br>
       <table id="events_table" style="margin-right : 20px; margin-left : 150px; float:none;">
 <tr>
    <td  width="2%"><b>Event</b></td>
    <td  width="8%"><b>Definition</b></td>
  </tr>
  <tr >
    <td>infect</td>
    <td> The process of a disease/pathogen invading host(s).	</td>
  </tr>
 <tr >
    <td>spread</td>
    <td> The process of a disease spreading/pervailing massively at a large scale. </td>
 </tr>
 <tr >
    <td>symptom</td>
    <td> Individuals displaying physiological features indicating the abnormality of organisms. 	</td>
 </tr>
  <tr >
    <td>prevent</td>
    <td> Individuals trying to prevent the infection of a disease.	</td>
 </tr>
  <tr >
    <td>control</td>
    <td> Collective efforts trying to impede the spread of a pandemic.	</td>
 </tr>
  <tr >
    <td>cure</td>
    <td> Stopping infection and relieving individuals from infections/symptoms.	</td>
 </tr>
  <tr >
    <td>death</td>
    <td> End of life of individuals due to infectious disease.	</td>
 </tr>
  <tr >
    <td>flag</td>
    <td> Special event used when annotated word is ambiguous or when there are multiple triggering words.  </td>
 </tr>
  </table>
      
      </p>
      
        <p> In order to annotate, first click once on a word that you think is a potential argument for the described event. Then you would have to choose which event is being triggered by that word. You also have the option to delete an already chosen trigger word or edit the events triggered by it
      </p>
        <p> <ul>Important Notes:  
            <li> There can be sentences without any events. No need to annotate anything for such sentences. </li>
            <li>  A trigger word can be linked to one or more events. Choose all possible events in such cases. </li>
            <li> Multiple events can be present in a given sentence. Mark all such events.  </li>
            <li> The same event can occur multiple times (at different parts) in the same sentence. Mark all occurrences of the event.  </li>
            <li> You will be able to submit the HIT at the last sentence once you finish annotating all the sentences. </li>
            <li> Select the "flag" event if you see multiple words as triggering words or any other ambiguous situations, but do not abuse this function. </li>
            </ul></p>
      
    </short-summary>

    <detailed-instructions>
      
      <p>
         Here are more detailed instructions for how to choose the most appropriate triggering word: <br> <br>
Goal: Look for the one word that MOST LIKELY manifests the event's occurrence. You can use the following priority order for annotation:
<ol>
    <li> Most of the times, the trigger of the event will be the the <span style="color:blue"> <b>main verb </b></span> in the sentence. </li>
    <li> If the verb is ambiguous/vague, the trigger would be a <span style="color:blue"> <b> noun </b></span> semantically related to event. </li>
    <li> (Rare case) If no such noun exists, the trigger would be any <span style="color:blue"> <b> adjective/adverb </b></span> that is related to the event. </li>
    <li> If still confused, use your best judgement to select the trigger. </li>
</ol>
</p>

<p>
<span style="color:blue"> <b>CASE I : main verb</b></span> <br>
Example Sentence: "I was coughing and got a fever yesterday but today just confirmed I did not get COVID"<br>
Annotation: There are 2 events of <i>symptom</i> and 1 event of <i>infect</i> in this example as follows (trigger words marked in blue): <br>
<ol type="a">
<li>...<span style="color:blue"><b>got</b></span> a fever... ->Event <i>symptom</i></li>
<li>...was <span style="color:blue"><b>coughing</b></span>... ->Event <i>symptom</i></li> 
<li>Note 1: “fever" and "COVID" are NOT marked as triggering word of the events since the main verbs indicate the event.<br>
Note 2: Here, due to the presence of “and”, we have two occurrences of the event <i>symptom</i>.</li>
<li>Also "get COVID" appears, but since there is a negation confirming no infection actually took place, there should be no infect event annotation.</li>
</ol>

Some more examples of main verb as triggering word:

<table id="events_table" style="margin-right : 50%; margin-left : 5%; float:none;">
 <tr>
    <td  width="2%"><b>Example</b></td>
    <td  width="1%"><b>Event</b></td>
  </tr>
  <tr >
    <td><span style="color:blue"><b>fight</b></span> against the pandemic</td>
    <td> control	</td>
  </tr>
  <tr >
    <td><span style="color:blue"><b>caught</b></span> a flu</td>
    <td> infect	</td>
  </tr>
    <tr >
    <td><span style="color:blue"><b>recover</b></span> from COVID</td>
    <td> cure	</td>
  </tr>
    <tr >
    <td>COVID <span style="color:blue"><b>takes</b></span> lives</td>
    <td> death	</td>
  </tr>
    <tr >
    <td><span style="color:blue"><b>prevent</b></span> infection</td>
    <td> prevent	</td>
  </tr>
    <tr >
    <td>stomach <span style="color:blue"><b>hurts</b></span></td>
    <td> symptom	</td>
  </tr>
    <tr >
    <td>number of infection <span style="color:blue"><b>increases</b></span></td>
    <td> spread	</td>
  </tr>

  </table>
  <br> <br>
</p>

<p>
<span style="color:blue"> <b>CASE II : noun</b></span> <br>
 Example Sentence: "Fever, cough, and headache are the most common symptoms of COVID"<br>
 Annotation: Here we have 1 event of <i>symptom</i> event:
 
 <ol type="a">
<li> ...common <span style="color:blue"><b>symptoms...</b></span> ->Event <i>symptom</i></li> <br>
Note: "fever", "cough", and "headache" manifest the <i>symptom</i> event but they are NOT triggering words because <span style="color:blue"><b>"symptoms"</b></span> better manifests the Event.<br>
</ol>

Some more examples of noun as triggering word: 
 
<table id="events_table" style="margin-right : 50%; margin-left : 5%; float:none;">
 <tr>
    <td  width="2%"><b>Example</b></td>
    <td  width="1%"><b>Event</b></td>
  </tr>
  <tr >
    <td><span style="color:blue"><b>death</b></span> rate</td>
    <td> death	</td>
  </tr>
  <tr >
    <td><span style="color:blue"><b>therapy</b></span> for COVID</td>
    <td> cure	</td>
  </tr>
    <tr >
    <td>infection <span style="color:blue"><b>prevention</b></span></td>
    <td> prevent	</td>
  </tr>
    <tr >
    <td><span style="color:blue"><b>control</b></span> of spread</td>
    <td> control	</td>
  </tr>
    <tr >
    <td><span style="color:blue"><b>signs</b></span> of infection</td>
    <td> symptom	</td>
  </tr>
    <tr >
    <td><span style="color:blue"><b>Spreading</b></span> of COVID</td>
    <td> spread	</td>
  </tr>
    <tr >
    <td><span style="color:blue"><b>infection</b></span> rate</td>
    <td> infect	</td>
  </tr>

  </table>

</p>

<p>
<span style="color:blue"> <b>CASE III :  adjective</b></span> <br>
Example Sentence: "I am feverish since 2 days ago"<br>
Annotation: Here we have 1 event of the <i>symptom</i> event:

<ol type="a">
<li> ...am <span style="color:blue"><b>feverish...</b></span> ->Event <i>symptom</i></li> <br>
Note: Here, we do not have a strong verb/noun for marking the trigger. Thus we mark "feverish"<br>
</ol>

Some more rare case examples of triggering word:

<table id="events_table" style="margin-right : 50%; margin-left : 5%; float:none;">
 <tr>
    <td  width="2%"><b>Example</b></td>
    <td  width="1%"><b>Event</b></td>
  </tr>
  <tr >
    <td>get <span style="color:blue"><b>rid</b></span> of disease</td>
    <td> cure	</td>
  </tr>
  <tr >
    <td>stay<span style="color:blue"><b>cautious</b></span> against virus</td>
    <td> prevent	</td>
  </tr>
    <tr >
    <td><span style="color:blue"><b>contagious</b></span> virus</td>
    <td> infect	</td>
  </tr>
  </table>

</p>

      
    </detailed-instructions>
    <positive-example> <p>Example 1: "The government has imposed mask requirement and social distance, so every one please remember to wear a mask and follow the rules to prevent infection and protect our nation from the virus."
      <p>Annotation: <br>
      <ol type="a">
          <li> <span style="color:blue"> <b>prevent</b></span> -> Event <i>prevent</i> </li>
          <li> <span style="color:blue"> <b>protect</b></span> -> Event <i>control</i></li>
      </ol>
      <ol>
          Note 1: Although infection is mentioned, it is prevented, meaning no infection is happening in the sentence, so event "infect" does NOT exist.<br> <br>
          Note 2: One cannot protect a nation individually, so "protect" triggers event "control", not "prevent". <br><br>
          <span style="color:red">  Do NOT mark negation of an event. </span>
      </ol>
      </p>
    </positive-example>
    
    <positive-example>
      <p>Example 2 : "If you ever have a fever, or cough, or have a sore throat, or have difficulty breathing, do a COVID test immediately since you may have been infected."
      <p>Annotation: <br>
      <ol type="a">
          <li> ...<span style="color:blue"> <b>have</b></span> a fever... -> Event <i>symptom</i></li>
          <li> been <span style="color:blue"> <b>infected</b></span> -> Event <i>infect</i> </li>
      </ol>
      <ol>   
          Note 1: If there are two or more parallel phrases triggering event "symptom", only mark the first triggering word instead of all of them. <br><br>
          <span style="color:red"> Mark first trigger if 2 or more parallel ones. </span><br><br>
          Note 2: Intuitively, getting tested for COVID helps to control the pandemic, but event "control" does not exist since it has no trigger words.<br><br>
          <span style="color:red">  Event must be determined via triggering word and CANNOT be inferred from another Event. </span><br><br>
          Note 3: Event "infect" has no explicit negation, so it still can happen, meaning an event "infect" exists.<br>
      </ol>
    </p>
    </positive-example>
    
    
    <negative-example> <p>Example 1: "The government has imposed mask requirement and social distance, so every one please remember to wear a mask and follow the rules."</p>
      <p>WRONG Annotation: <br>
      <ol type="a">
          <li> <span style="color:blue"> <b>imposed</b></span> -> Event <i>control</i> </li>
      </ol>
      
      Correct Annotation: <br>
      <ol type="a">
          <li> No events present in sentence </li>
       </ol>
       <ol>
          Note 1: "mask requirement" and "social distance" are policies to control the COVID pandemic. But there is no mention of COVID/virus/disease in the sentence, it’s unclear if these measures help to control the pandemic. Thus, no <i>control</i> event. <br> <br>
          Note 2: ”wear a mask" and "follow the rules" are actions to prevent COVID infection, but again since nothing is explicitly specified, no <i>prevent</i> event is annotated.
      </ol>
      
      <span style="color:red">  Look for Events themselves instead of actions/policies related to Events. </span>
      </p>
    </negative-example>
    
    <negative-example> <p>Example 2 : "Two weeks of quarantine is killing me! May God cure my mind and stop my crazy thoughts."</p>
            <p>WRONG Annotation: <br>
      <ol type="a">
          <li> <span style="color:blue"> <b>killing</b></span> -> Event <i>death</i> </li>
      </ol>
      
      Correct Annotation: <br>
      <ol type="a">
          <li> No events present in sentence </li>
       </ol>
       
        <ol>
          Note 1: “killing” is not indicating real end of somebody's life, so Event death does NOT exist here. <br> <br>
          Note 2: "cure" doesn’t indicate the cure against the disease. Thus, it is not a triggering word of Event <i>cure</i>.
      </ol>
       
<span style="color:red"> DO NOT identify hyperbole or other rhetorical device as Events. </span> <br>
<span style="color:red"> Synonyms of Event names are likely to be triggering words but NOT GUARANTEED!! Must double check Event definition! </span>
      </p>
    </negative-example>
    
  </crowd-instructions>
<div style = "display:flex;">
<div id="annotate">
    
    <div>
    <p style="padding-left:10px;color:red;width:350px;"><b>Please read the instructions before attempting the task</b></p>
  </div>

  <!-- We store the events in the 5 pages in these divs -->
  <div id="events" style="display:none;"></div>
  <div id="questions" style="display:none;"></div>
  <div id="annotations" style="display:none;"></div>

     <p style="width:350px; font-size:100%; margin:20px; padding:20px; border:1px solid black;" id="text_event"></p>
     <p style="width:350px; font-size:100%; margin:20px; padding:20px; border:1px solid black;" id="text_question" onmouseup="select(event);"></p>
  <div>
      <crowd-input style="display:none;" type="text" id="infect_trigger_words" name="infect_trigger_words"></crowd-input>
      <crowd-input style="display:none;" type="text" id="spread_trigger_words" name="spread_trigger_words"></crowd-input>
      <crowd-input style="display:none;" type="text" id="symptom_trigger_words" name="symptom_trigger_words"></crowd-input>
      <crowd-input style="display:none;" type="text" id="prevent_trigger_words" name="prevent_trigger_words"></crowd-input>
      <crowd-input style="display:none;" type="text" id="control_trigger_words" name="control_trigger_words"></crowd-input>
      <crowd-input style="display:none;" type="text" id="cure_trigger_words" name="cure_trigger_words"></crowd-input>
      <crowd-input style="display:none;" type="text" id="death_trigger_words" name="death_trigger_words"></crowd-input>
      <crowd-input style="display:none;" type="text" id="flag_trigger_words" name="flag_trigger_words"></crowd-input>
      <crowd-input style="display:none;" type="text" id="master_object" name="master_object"></crowd-input>
  </div>
        <div id="contextMenu" class="context-menu" 
        style="display:none; border:1px solid black; width: 400px ;padding: 10px; margin: 10px;">
        <p id="trigger_word_content"></p> 
         <div id="infect_event"> <crowd-checkbox type="checkbox" id="infect" name="name" value="infect" onclick="updateDropdowns(0)" > </crowd-checkbox> <label for="infect"> infect </label> </div>
         <br>
         <div id="spread_event"> <crowd-checkbox type="checkbox" id="spread" name="name" value="spread" onclick="updateDropdowns(1)" ></crowd-checkbox><label for="spread"> spread </label> </div>
         <br>
         <div id="symptom_event"> <crowd-checkbox type="checkbox" id="symptom" name="name" value="symptom" onclick="updateDropdowns(2)" > </crowd-checkbox>  <label for="symptom"> symptom </label> </div>
         <br>
         <div id="prevent_event"> <crowd-checkbox type="checkbox" id="prevent" name="name" value="prevent" onclick="updateDropdowns(3)" > </crowd-checkbox> <label for="prevent"> prevent </label> </div>
         <br>
         <div id="control_event"> <crowd-checkbox type="checkbox" id="control" name="name" value="control" onclick="updateDropdowns(4)" > </crowd-checkbox>  <label for="control"> control </label> </div>
         <br>
         <div id="cure_event"> <crowd-checkbox type="checkbox" id="cure" name="name" value="cure" onclick="updateDropdowns(5)"  > </crowd-checkbox> <label for="cure"> cure </label> </div>
         <br>
         <div id="death_event"> <crowd-checkbox type="checkbox" id="death" name="name" value="death" onclick="updateDropdowns(6)" > </crowd-checkbox> <label for="death"> death </label> </div>
         <br>
         <!-- Using flagg b/c flag ID is reserved -->
         <div id="flag_event"> <crowd-checkbox type="checkbox" id="flagg" name="source" value="flagg" onclick="updateDropdowns(7)"> <label for="flagg">flag</label> </div>
         <br>

         <div id="argument-infect-div" style="display: none;" >
             <p>Infect:</p>
             <select name="argument-infect" id="argument-infect" onChange="updateOtherDropdowns(0)" required>
                <option id="argument-infect-trigger" value="trigger">Trigger</option>
                <option id="argument-infect-infected" value="infected">Infected</option>
                <option id="argument-infect-disease" value="disease">Disease</option>
                <option id="argument-infect-place" value="place">Place</option>
                <option id="argument-infect-time" value="time">Time</option>
                <!--<option id="argument-infect-manner" value="manner">Manner</option>-->
                <option id="argument-infect-val" value="val">Value</option>
                <!--<option id="argument-infect-origin" value="origin">Origin</option>-->
                <option id="argument-infect-information" value="information">Information-source</option>
                <option id="argument-infect-other" value="other">Other</option>
             </select>

             <select name="argument-infect-tw" id="argument-infect-tw"> </select>

             <input type="text" name="argument-infect-input" id="argument-infect-input" style="display: none;"></input>
         </div>

         <div id="argument-spread-div" style="display: none;" >
             <p>Spread:</p>
             <select name="argument-spread" id="argument-spread" onChange="updateOtherDropdowns(1)" required>
                <option id="argument-spread-trigger" value="trigger">Trigger</option>
                <option id="argument-spread-population" value="population">Population</option>
                <option id="argument-spread-disease" value="disease">Disease</option>
                <option id="argument-spread-place" value="place">Place</option>
                <option id="argument-spread-time" value="time">Time</option>
                <!--<option id="argument-spread-manner" value="manner">Manner</option>-->
                <option id="argument-spread-val" value="val">Value</option>
                <!--<option id="argument-spread-origin" value="origin">Origin</option>-->
                <option id="argument-spread-information" value="information">Information-source</option>
                <option id="argument-spread-trend" value="trend">Trend</option>
                <option id="argument-spread-other" value="other">Other</option>
             </select>

             <select name="argument-spread-tw" id="argument-spread-tw"> </select>

             <input type="text" name="argument-spread-input" id="argument-spread-input" style="display: none;"></input>
         </div>

         <div id="argument-symptom-div" style="display: none;">
             <p>Symptom:</p>
             <select name="argument-symptom" id="argument-symptom" onChange="updateOtherDropdowns(2)" required>
                <option id="argument-symptom-trigger" value="trigger">Trigger</option>
                <option id="argument-symptom-person" value="person">Person</option>
                <option id="argument-symptom-symptom" value="symptom">Symptom</option>
                <option id="argument-symptom-disease" value="disease">Disease</option>
                <option id="argument-symptom-place" value="place">Place</option>
                <option id="argument-symptom-time" value="time">Time</option>
                <option id="argument-symptom-duration" value="duration">Duration</option>
                <option id="argument-symptom-information" value="information">Information-source</option>
                <option id="argument-symptom-other" value="other">Other</option>
             </select>

             <select name="argument-symptom-tw" id="argument-symptom-tw"> </select>

             <input type="text" name="argument-symptom-input" id="argument-symptom-input" style="display: none;"></input>
         </div>

         <div id="argument-prevent-div" style="display: none;">
             <p>Prevent:</p>
             <select name="argument-prevent" id="argument-prevent" onChange="updateOtherDropdowns(3)" required>
                <option id="argument-prevent-trigger" value="trigger">Trigger</option>
                <option id="argument-prevent-agent" value="agent">Agent</option>
                <option id="argument-prevent-disease" value="disease">Disease</option>
                <option id="argument-prevent-means" value="means">Means</option>
                <!--<option id="argument-prevent-place" value="place">Place</option>-->
                <!--<option id="argument-prevent-time" value="time">Time</option>-->
                <option id="argument-prevent-information" value="information">Information-source</option>
                <option id="argument-prevent-target" value="target">Target</option>
                <option id="argument-prevent-effectiveness" value="effectiveness">Effectiveness</option>
                <option id="argument-prevent-impact" value="impact">Impact</option>
                <option id="argument-prevent-other" value="other">Other</option>
             </select>

             <select name="argument-prevent-tw" id="argument-prevent-tw"> </select>

             <input type="text" name="argument-prevent-input" id="argument-prevent-input" style="display: none;"></input>
         </div>

         <div id="argument-control-div" style="display: none;">
             <p>Control:</p>
             <select name="argument-control" id="argument-control" onChange="updateOtherDropdowns(4)" required>
                <option id="argument-control-trigger" value="trigger">Trigger</option>
                <option id="argument-control-authority" value="authority">Authority</option>
                <option id="argument-control-disease" value="disease">Disease</option>
                <option id="argument-control-means" value="means">Means</option>
                <option id="argument-control-place" value="place">Place</option>
                <option id="argument-control-time" value="time">Time</option>
                <!--<option id="argument-control-origin" value="origin">Origin</option>-->
                <option id="argument-control-subject" value="subject">Subject</option>
                <option id="argument-control-information" value="information">Information-source</option>
                <!--<option id="argument-control-target" value="target">Target</option>-->
                <option id="argument-control-effectiveness" value="effectiveness">Effectiveness</option>
                <option id="argument-control-impact" value="impact">Impact</option>
                <option id="argument-control-other" value="other">Other</option>
             </select>

             <select name="argument-control-tw" id="argument-control-tw"> </select>

             <input type="text" name="argument-control-input" id="argument-control-input" style="display: none;"></input>
         </div>

         <div id="argument-cure-div" style="display: none;">
             <p>Cure:</p>
             <select name="argument-cure" id="argument-cure" onChange="updateOtherDropdowns(5)" required>
                <option id="argument-cure-trigger" value="trigger">Trigger</option>
                <option id="argument-cure-cured" value="cured">Cured</option>
                <option id="argument-cure-disease" value="disease">Disease</option>
                <option id="argument-cure-means" value="means">Means</option>
                <option id="argument-cure-place" value="place">Place</option>
                <option id="argument-cure-time" value="time">Time</option>
                <option id="argument-cure-val" value="val">Value</option>
                <option id="argument-cure-facility" value="facility">facility</option>
                <option id="argument-cure-information" value="information">Information</option>
                <option id="argument-cure-effectiveness" value="effectiveness">Effectiveness</option>
                <option id="argument-cure-duration" value="duration">Duration</option>
                <option id="argument-cure-other" value="other">Other</option>
             </select>

             <select name="argument-cure-tw" id="argument-cure-tw"> </select>

             <input type="text" name="argument-cure-input" id="argument-cure-input" style="display: none;"></input>
         </div>

         <div id="argument-death-div" style="display: none;">
             <p>Death:</p>
             <select name="argument-death" id="argument-death" onChange="updateOtherDropdowns(6)" required>
                <option id="argument-death-trigger" value="trigger">Trigger</option>
                <option id="argument-death-dead" value="dead">Dead</option>
                <option id="argument-death-disease" value="disease">Disease</option>
                <option id="argument-death-place" value="place">Place</option>
                <option id="argument-death-time" value="time">Time</option>
                <option id="argument-death-val" value="val">Value</option>
                <option id="argument-death-information" value="information">Information-source</option>
                <option id="argument-death-trend" value="trend">Trend</option>
                <!--<option id="argument-death-impact" value="impact">Impact</option>-->
                <option id="argument-death-other" value="other">Other</option>
             </select>

             <select name="argument-death-tw" id="argument-death-tw"> </select>

             <input type="text" name="argument-death-input" id="argument-death-input" style="display: none;"></input>
         </div>

         <div id="argument-flag-div" style="display: none;">
            Flag Reason:<br>
            <input type="text" name="argument-flag-input" id="argument-flag-input"></input>
         </div>
         
         <br>
        <button type="button" onclick="events_selected()">Submit</button>
         
         <br>

    </div>
  

  <div>
    <p style="padding-left:10px;color:#e31818;width:350px;">Single click to select the event trigger words present in the above text” to “In order to annotate, first single click on a word that you think is a potential argument for the described event. Then you would have to choose which event is being triggered by that word</p>
    
    <p style="padding-left:10px;color:#2c18e3;width:350px;">Trigger words and Events:</p>
    
    <div id="text_annotations"></div>

    <!-- <div id='`+id+`' style='border:1px solid black; width: 300px ;padding: 10px; margin: 10px; display: flex; justify-content: space-between;'>
        <div>
        <p style='margin: 0px'>trigger: <span style='color:#1ec211'>your</span></p>
        <p style='margin: 0px'>disease: <span style='color:#1ec211'>mom</span></p>
        <p style='margin: 0px'>disease: <span style='color:#1ec211'>mom</span></p>
        <p style='margin: 0px'>disease: <span style='color:#1ec211'>mom</span></p>
        <p style='margin: 0px'>disease: <span style='color:#1ec211'>mom</span></p>
        <p style='margin: 0px'>disease: <span style='color:#1ec211'>mom</span></p>
        </div>
    <div>
        <div>
            <input type="checkbox" id="checkbox_`+id+`" name="`+id+`" value="" onclick="addIncorrect('`+id+`')"> </input> <label for="incorrect"> incorrect? </label> 
        </div>
        <div id="expl_`+id+`"> <textarea id="expl_`+id+`_text" name="`+id+`" placeholder="Explanation"> </textarea></div>
    </div>
</div> -->

    <div id="trigger_words"></div>
  
 <button type="submit" style="background-color:#f59d48;font-size:20px;" id="submit_hit" disabled onclick="handle_submit()">Submit HIT</button> 


  </div>
 </div>
 
 
 <table id="small_table" style="margin-right : 20px; margin-left : 150px;">
 <tr>
    <td  width="2%"><b>Event</b></td>
    <td  width="12%"><b>Definition</b></td>
    <td  width="10%"><b>Examples</b></td>
  </tr>
  <tr >
    <td>infect</td>
    <td> <span style="color:blue"> disease invading host(s). </span> <br>
        **emphasize infection"	</td>
    <td>
        "I <b>have</b> COVID." <br>
        "High <b>infection</b> rate in U.S. ..."	
    </td>
  </tr>
 <tr >
    <td>spread</td>
    <td> <span style="color:blue"> disease spreading at a large scale. </span> <br>
        **emphasize dispersion<br> </td>
    <td>
        "Control the <b>spread</b> of covid." <br>
        "Infected cases <b>increases</b> ..."
    </td>
 </tr>
 <tr >
    <td>symptom</td>
    <td> <span style="color:blue"> Individuals displaying abnormal physiological features. </span> 	</td>
    <td>"<b>Symptoms</b> of disease..." <br>
        "I <b>have</b> a sore throat."</td>
 </tr>
  <tr >
    <td>prevent</td>
    <td> <span style="color:blue"> attempting to avoid infection of a disease. </span> <br>
                                    **can be done by individual effort"	
    </td>
    <td>"...<b>prevent</b> disease infection." <br>
        "...<b>protect</b> family from COVID."	</td>
 </tr>
  <tr >
    <td>control</td>
    <td> <span style="color:blue"> attempting to control spread of a pandemic. </span> <br>
                                   **can NOT be done by individual effort"		
    </td>
    <td>	"...<b>protect</b> nation from COVID." <br>
            "...<b>control</b> the spread of flu."	</td>
 </tr>
  <tr >
    <td>cure</td>
    <td> <span style="color:blue">relieving individuals from infections and symptoms.	</span>		</td>
    <td>"This drug can <b> treat </b> smallpox." <br>
        "I <b> recovered </b> from my illness."</td>
 </tr>
  <tr >
    <td>death</td>
    <td> <span style="color:blue"> End of life of individuals due to infectious disease.	</span>	</td>
    <td>"Stats about Covid <b>death</b> toll..." <br>
        "The virus <b>kills</b> 50 people..."	</td>
 </tr>
  <tr >
    <td>flag</td>
    <td> <span style="color:blue"> Special event used when annotation is ambiguous for some reason.  </span> </td>
    <td>  </td>
 </tr>
  </table>

  <div id="arg_table" style="margin-right:20px;margin-left:50px;display:none">
    <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vRv0wQ6v5pQhLOexXdleJqZlfxHz26njSdGMb5sr2DoC6Bp1ofrYkm-Q9kdCeNt5Hm75xLyhavh5tkr/pubhtml?gid=848061852&amp;single=true&amp;widget=true&amp;headers=false" width="750px" height="400px"></iframe>
  </div>

  <!--<table id="arg_table" style="margin-right:20px;margin-left:150px;display:none">
        <thead><tr><th title="Field #1">Event</th>
    <th title="Field #2">Argument</th>
    <th title="Field #3">Infect</th>
    <th title="Field #4">Example</th>
    <th title="Field #5">Notes</th>
    </tr></thead>
    <tbody>
    <tr>
    <td> </td>
    <td>Infected</td>
    <td>The individual(s) being infected</td>
    <td>Three dozen <b>workers</b> at ( user ) have tested positive for COVID - 19 as of May 15 . #( National Nurses Week url ) ( url )</td>
    <td> </td>
    </tr>
    <tr>
    <td> </td>
    <td>Disease</td>
    <td>The disease or virus that invaded the host</td>
    <td>Three dozen workers at ( user ) have tested positive for <b>COVID</b> - 19 as of May 15 . #( National Nurses Week url ) ( url )</td>
    <td> </td>
    </tr>
    <tr>
    <td>Attribute slots</td>
    <td> </td>
    <td> </td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
    <td> </td>
    <td>Place</td>
    <td>The place that the individual(s) are infected</td>
    <td>-</td>
    <td> </td>
    </tr>
    <tr>
    <td> </td>
    <td>Time</td>
    <td>The time that the individual(s) are infected</td>
    <td>Three dozen workers at ( user ) have tested positive for COVID - 19 as of <b>May 15</b> . #( National Nurses Week url ) ( url )</td>
    <td> </td>
    </tr>
    <tr>
    <td> </td>
    <td>Manner</td>
    <td>The means by which the disease infect a host</td>
    <td>COVID - 19 spreads mainly among people who are in close contact ( within 6 feet ) for a PROLONGED period . Spread happens when an infected person coughs , sneezes , or talks &amp; amp ; droplets from their mouth or nose are launched into the <b>air</b> &amp; amp ; land in the mouths or noses of people nearby .</td>
    <td> </td>
    </tr>
    <tr>
    <td> </td>
    <td>Value</td>
    <td>The number of people being infected</td>
    <td><b>Three dozen</b> workers at ( user ) have tested positive for COVID - 19 as of May 15 . #( National Nurses Week url ) ( url )</td>
    <td> </td>
    </tr>
    <tr>
    <td> </td>
    <td>Origin</td>
    <td>The place from where the disease comes.</td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
    <td> </td>
    <td>Information-source</td>
    <td>The source that is providing this information regarding to infection</td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
    <td>Event</td>
    <td>Argument</td>
    <td>Spread</td>
    <td> </td>
    <td>Notes</td>
    </tr>
    <tr>
    <td>Participant slots</td>
    <td> </td>
    <td> </td>
    <td> </td>
    <td>In many cases, phrases like &quot;the pandemic is spreading&quot; does not appear with other info regarding place and time or even the name of the disease; do we consider to utilize the published time of the tweet?<br/><br/>Also there are cases with only one explicit trigger word but several arguments, do we only consider the segment with explicit trigger words? </td>
    </tr>
    <tr>
        <td> </td>
    <td>Population</td>
    <td>The population among which the disease spreads</td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Disease</td>
    <td>The disease/virus/pandemic that is prevailing</td>
    <td>Right now , Britain doesnt have the ability to evenmonitor the spread of the <b>virus</b> , let alone keep it under ( url ) is the scientific basis for assuming thatchildren dont spreadcoronavirus ? How can social distancing really be made to work ?( url )</td>
    <td> </td>
    </tr>
    <tr>
    <td>Attribute slots</td>
    <td> </td>
    <td> </td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Place</td>
    <td>The place at which the disease is spreading</td>
    <td>Right now , <b>Britain</b> doesnt have the ability to evenmonitor the spread of the virus , let alone keep it under ( url ) is the scientific basis for assuming thatchildren dont spreadcoronavirus ? How can social distancing really be made to work ?( url )</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Time</td>
    <td>The time during which the disease is spreading</td>
    <td>According to Johns Hopkins University , 22k new cases of Covid - 19 were diagnosed on <b>Tuesday , 5 / 12</b> . On <b>Wednesday</b> that number was 20k . And <b>yesterday</b> it was up to 28 , 000 . But keep telling us its no problem to keep opening up ( preferably without verifying your #( American Gun Fetish ).</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Manner</td>
    <td>The means by which a disease spread</td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Value</td>
    <td>The number of people being infected</td>
    <td>According to Johns Hopkins University , <b>22k</b> new cases of Covid - 19 were diagnosed on Tuesday , 5 / 12 . On Wednesday that number was <b>20k</b> . And yesterday it was up to <b>28 , 000</b> . But keep telling us its no problem to keep opening up ( preferably without verifying your #( American Gun Fetish ).</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Origin</td>
    <td>The place from where the disease comes.</td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Information-source</td>
    <td>The source that is providing this information regarding to the transmission of the disease</td>
    <td>According to <b>Johns Hopkins University</b> , 22k new cases of Covid - 19 were diagnosed on Tuesday , 5 / 12 . On Wednesday that number was 20k . And yesterday it was up to 28 , 000 . But keep telling us its no problem to keep opening up ( preferably without verifying your #( American Gun Fetish ).</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Trend</td>
    <td>The possible change of a transmission of a disease</td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
    <td> </td>
    <td> </td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
    <td>Event</td>
    <td>Argument</td>
    <td>Symoptom</td>
    <td> </td>
    <td>Notes</td>
    </tr>
    <tr>
        <td> </td>
    <td>Person</td>
    <td>The individual(s) displaying symptoms</td>
    <td>( user ) ( user ) Well , no , since <b>I</b> had a mix of these symptoms - it was * obviously * covid - 19 , since there is usually a , signature , symptom front and centre . For example , I had the mildest cough in the world - then a pick and mix of the others ( in particular the loss of taste and tiredness ).</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Sympyom</td>
    <td>The concrete symptom(s) that are displayed</td>
    <td>( user ) ( user ) Well , no , since I had a mix of these symptoms - it was * obviously * covid - 19 , since there is usually a , signature , symptom front and centre . For example , I had the <b>mildest cough</b> in the world - then a pick and mix of the others ( in particular the <b>loss of taste</b> and <b>tiredness</b> ).</td>
    <td> </td>
    </tr>
    <tr>
    <td>Attribute slots</td>
    <td> </td>
    <td> </td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Disease</td>
    <td>The disease(s) that are potentially causing the symptoms</td>
    <td>( user ) ( user ) Well , no , since I had a mix of these symptoms - it was * obviously * <b>covid - 19</b> , since there is usually a , signature , symptom front and centre . For example , I had the mildest cough in the world - then a pick and mix of the others ( in particular the loss of taste and tiredness ).</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Place</td>
    <td>The place at which the symptom(s) are displayed</td>
    <td>-</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Time</td>
    <td>The time during which the symptom(s) are displayed</td>
    <td>-</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Duration</td>
    <td>The time interval that the symptom(s) last</td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Information-source</td>
    <td>The source that is providing this information regarding to symptoms of the disease</td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
    <td>Event</td>
    <td>Argument</td>
    <td>Prevent</td>
    <td> </td>
    <td>Notes</td>
    </tr>
    <tr>
    <td>Participant slots</td>
    <td> </td>
    <td> </td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Agent</td>
    <td>The individual(s) attempting to avoid infections </td>
    <td>( user ) As of today , I know of two people I knew who died from the Coronavirus . Why take chances ? It &#39; s not that hard to wear a mask . <b>You</b> are protecting yourself and others .</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Disease</td>
    <td>The disease/virus/illness being defensed against</td>
    <td>( user ) As of today , I know of two people I knew who died from the <b>Coronavirus</b> . Why take chances ? It &#39; s not that hard to wear a mask . You are protecting yourself and others .</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Means</td>
    <td>actions/means that may prevent infection</td>
    <td>( user ) As of today , I know of two people I knew who died from the Coronavirus . Why take chances ? It &#39; s not that hard to <b>wear a mask</b> . You are protecting yourself and others .</td>
    <td> </td>
    </tr>
    <tr>
    <td>Attribute slots</td>
    <td> </td>
    <td> </td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Place</td>
    <td>The place at which the prevention takes place</td>
    <td>-</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Time</td>
    <td>The time at which the prevention takes place</td>
    <td>-</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Information-source</td>
    <td>The source that is providing this information regarding to the prevention of this disease</td>
    <td><b>Online health gurus</b> say high doses of vitamins and natural remedies can stave off COVID - 19 but evidence to support these claims is lacking . ( url )</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Target</td>
    <td>The individual(s)/population to which the agent attempts to prevent the disease transmission</td>
    <td>( user ) As of today , I know of two people I knew who died from the Coronavirus . Why take chances ? It &#39; s not that hard to wear a mask . You are protecting <b>yourself and others</b> .</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Effectiveness</td>
    <td>How effective is the means against the disease</td>
    <td>Online health gurus say high doses of vitamins and natural remedies can stave off COVID - 19 but evidence to support these claims is <b>lacking</b> . ( url )</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Impact</td>
    <td>The physical/emotional impact caused by prevention measures</td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
    <td>Event</td>
    <td>Argument</td>
    <td>Control</td>
    <td> </td>
    <td>Notes</td>
    </tr>
    <tr>
    <td>Participant slots</td>
    <td> </td>
    <td> </td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Authority</td>
    <td>The authoritity implementing/advocating the control of a panedmic</td>
    <td>Maybe the <b>gov &#39; t</b> lockdown was first implemented in a good faith effort to protect health . But after the bait and switch ( flatten the curve became wait for a vaccine ), its hard to argue that this is about anything more than control .&quot;</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Disease</td>
    <td>The intruding disease being defensed against</td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Means</td>
    <td>the enacted/adcovated policies/actions that may control the pandemic</td>
    <td>Maybe the gov &#39; t <b>lockdown</b> was first implemented in a good faith effort to protect health . But after the bait and switch ( flatten the curve became wait for a vaccine ), its hard to argue that this is about anything more than control .&quot;</td>
    <td> </td>
    </tr>
    <tr>
    <td>Attribute slots</td>
    <td> </td>
    <td> </td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Place</td>
    <td>The place at which the control takes place</td>
    <td>( user ) Make wearing masks mandatory , please . It can save a lot of people . <b>Taiwan , Hong Kong , New Zealand , Austria</b> have already shown you its effectiveness . ( url )</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Time</td>
    <td>The time at which the control takes place</td>
    <td>-</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Origin</td>
    <td>The place from where the disease comes.</td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Information-source</td>
    <td>The source that is providing this information regarding to the control of this disease</td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Target</td>
    <td>The individual(s)/population among which the agent attempts to impede the disease transmission</td>
    <td>( user ) Make wearing masks mandatory , please . It can save a lot of <b>people</b> . Taiwan , Hong Kong , New Zealand , Austria have already shown you its effectiveness . ( url )</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Effectiveness</td>
    <td>How effective is the means against the disease</td>
    <td>( user ) Make wearing masks mandatory , please . It can save a lot of people . Taiwan , Hong Kong , New Zealand , Austria have already shown you its <b>effectiveness</b> . ( url )</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Impact</td>
    <td>The physical/emotional/social impact caused by control policies</td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
    <td>Event</td>
    <td>Argument</td>
    <td>Cure</td>
    <td> </td>
    <td>Notes</td>
    </tr>
    <tr>
    <td>Participant slots</td>
    <td> </td>
    <td> </td>
    <td> </td>
    <td>We don&#39;t count cures that is completely not effective as triggering event Cure </td>
    </tr>
    <tr>
        <td> </td>
    <td>Cured</td>
    <td>The individuals(s) recovered/recieving the treatments</td>
    <td>( user ) from ( user ) says that while most <b>patients</b> recover from COVID - 19 in <b>about a week</b> , a significant minority of patients enter a very nasty second wave of illness . Read more : ( url ) #( u alberta ) ( user ) #( COVID ) #( infectious diseases ) ( url )</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Disease</td>
    <td>The disease/illness that the patients get rid of</td>
    <td>Repurposing drugs to treat #( COVID ) - our site now links to a live database listing all treatments against <b>COVID - 19</b> reported in PubMed ! ( user ) ( user ) ( url )</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Means</td>
    <td>The therapy that (potentialy) treat the disease</td>
    <td>Repurposing <b>drugs</b> to treat #( COVID ) - our site now links to a live database listing all treatments against COVID - 19 reported in PubMed ! ( user ) ( user ) ( url )</td>
    <td> </td>
    </tr>
    <tr>
    <td>Attribute slots</td>
    <td> </td>
    <td> </td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Place</td>
    <td>The place at which the recovery takes place</td>
    <td>-</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Time</td>
    <td>The time at which the recovery takes place</td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Value</td>
    <td>The number of people being cured</td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Facility</td>
    <td>The individual(s)/organization(s) utilizing/inventing certain means to facilitate recoveries</td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Information-source</td>
    <td>The source that is providing this information regarding to the cure/recovery of this disease</td>
    <td>Repurposing drugs to treat #( COVID ) - our site now links to a live database listing all treatments against COVID - 19 reported in <b>PubMed</b> ! ( user ) ( user ) ( url )</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Effectiveness</td>
    <td>How effective is the means against the disease</td>
    <td>This Recently developed Anti - body could very well be the answer to Ending this CoronaVirus . Shown to be <b>100 % effective</b> so far ( url )</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Duration</td>
    <td>The time interval that the treatment takes</td>
    <td>( user ) from ( user ) says that while most patients recover from COVID - 19 in <b>about a week</b> , a significant minority of patients enter a very nasty second wave of illness . Read more : ( url ) #( u alberta ) ( user ) #( COVID ) #( infectious diseases ) ( url )</td>
    <td> </td>
    </tr>
    <tr>
    <td>Event</td>
    <td>Argument</td>
    <td>Death</td>
    <td> </td>
    <td>Notes</td>
    </tr>
    <tr>
    <td>Participant slots</td>
    <td> </td>
    <td> </td>
    <td> </td>
    <td>The trend may be manifested via change of numbers instead of a trigger</td>
    </tr>
    <tr>
        <td> </td>
    <td>Dead</td>
    <td>The individuals(s) who die of infectious disease</td>
    <td>-</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Disease</td>
    <td>The disease that (potentially) causes the death</td>
    <td>( url ) on pace to pass 100 , 000 <b>Covid - 19</b> deaths by June 1 , CDC director says - POLITICO ( url</td>
    <td> </td>
    </tr>
    <tr>
    <td>Attribute slots</td>
    <td> </td>
    <td> </td>
    <td> </td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Place</td>
    <td>The place at which the death takes place</td>
    <td>-</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Time</td>
    <td>The time at which the death takes place</td>
    <td>( url ) on pace to pass 100 , 000 Covid - 19 deaths by <b>June 1</b> , CDC director says - POLITICO ( url</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Value</td>
    <td>The number of death</td>
    <td>( url ) on pace to pass <b>100 , 000</b> Covid - 19 deaths by June 1 , CDC director says - POLITICO ( url</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Information-source</td>
    <td>The source that is providing this information regarding to fatality of this disease</td>
    <td>( url ) on pace to pass 100 , 000 Covid - 19 deaths by June 1 , <b>CDC director</b>  says - POLITICO ( url</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Trend</td>
    <td>The trend of death counts caused by disease infection</td>
    <td>( user ) ( user ) Well we know for sure exactly how many have died from covid . We have no clue how many have survived it . So doing some quick math here ... the death rate can only <b>go down</b> . Its a mathematical certainty . Soooo definitely deceptive numbers to increase fear .</td>
    <td> </td>
    </tr>
    <tr>
        <td> </td>
    <td>Impact</td>
    <td>The physical/emotional impact caused by disease fatalities</td>
    <td> </td>
    <td> </td>
    </tr>
    </tbody>
  </table>-->
  
  <table id="big_table" style="margin-right:20px;margin-left:150px;display:none">
  <tr>
    <td  width="2%"><b>Event</b></td>
    <td  width="12%"><b>Definition and examples</b></td>
    <td  width="22%"><b>Difference between Events</b></td>
  </tr>
  <tr >
    <td>infect</td>
    <td><span style="color:blue"> The process of a disease/pathogen invading host(s). </span> <br>
eg. "I <b>caught</b> a cold." <br> "Disease is <b>infectious</b>." <br>
      "New COVID <b>cases</b>."</td>
    </td>
    <td  rowspan="2">-- Event <i>infect</i> focus on disease's action of invading host(s).<br>
-- Event <i>spread</i> focus on disease's action of dispersing.<br>
-- Use the focus of triggering word to determine which Event dominates.<br>
(eg. COVID infected 1.5 million people in L.A.) Though 1.5 million people infected means COVID is spreading, we mark Event infect because triggering word <b>infected</b> emphasize infection not dispersion.<br>
</td>
  </tr>
 <tr >
    <td>spread</td>
    <td><span style="color:blue">The process of a disease spreading/pervailing massively at a large scale.</span> <br>
eg."Disease <b>sweeps</b> across L.A."  "SARS was prevalent in Asia."<br>
     "To stop the <b>transmission</b> of infection..." </td>
 </tr>
 <tr >
    <td>symptom</td>
    <td><span style="color:blue">Individuals displaying physiological features indicating the abnormality of organisms.</span> <br>
eg."I <b>got</b> a fever."  <br>   "I feel <b>sick</b>."  <br>  "He <b>vomits</b> and <b>cough</b>."</td>
    <td>-- Event <i>symptoms</i> potentially but not necessarily implies infection of some disease.<br>
-- Event <i>infect</i> indicates confirmed infection of some disease.</td>
 </tr>
  <tr >
    <td>prevent</td>
    <td> <span style="color:blue"> Individuals trying to prevent the infection of a disease.</span> <br>
eg. "tips to <b>avoid</b> catching a cold."  <br>       "<b>Prevention</b> of infection" <br>
      "remember COVID <b>protective</b> rules."	</td>
    <td rowspan="2">-- Event <i>prevent</i> focus on preventing disease infection. <br>
-- Event <i>control</i> focus on controling disease dispersion. <br>
-- Usually Event <i>prevent</i> can be achieved by individual effort, such as "<b>avoid</b> infection", while Event <i>control</i> can NOT be achieved by individual effort, such as "<b>control</b> the spread of COVID."</td>
 </tr>
  <tr >
    <td>control</td>
    <td>  <span style="color:blue"> Collective efforts trying to impede the spread of a pandemic.</span> <br>
eg. "the pandemic can be <b>stopped</b>."   <br>        "<b>Fight</b> against COVID." <br>
       "Government failed to <b>slow</b> down the spread of COVID." 		</td>
 </tr>
  <tr >
    <td>cure</td>
    <td> <span style="color:blue"> Stopping infection and relieving individuals from infections/symptoms. </span> <br>
eg. "no effective <b>treatment</b> for Covid."   <br>        "Get <b>rid</b> of a disease."  <br>
       "Can it <b>cure</b> the disease?"		</td>
    <!--<td>"Three steps to get <b>rid</b> of the flu: drink water, keep warm, and rest well."<br>"There is no effective <b>treatment</b> for COVID so far."<br>"Even patients already <b>recovered</b> from COVID remain coughing for a while."</td>-->
    <td></td>
 </tr>
  <tr >
    <td>death</td>
    <td> <span style="color:blue"> End of life of individuals due to infectious disease. </span> <br>
eg. "<b>fatality</b> rate is high." <br>                 "<b>Loss</b> of life during pandemic." <br>
      "Thousands of people <b>died</b> of SARS 20 years ago."	</td>

    <td>-- Hyperbole and rhetorical expression (eg. I'd rather die than quarantine for a month) does not count as Event <i>death</i>.</td>
 </tr>
 
</table>


</div>
</crowd-form>
</body>
</html>
